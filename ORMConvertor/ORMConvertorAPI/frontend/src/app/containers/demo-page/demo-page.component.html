<div class="pane-container">

  <div class="pane left">
    <label class="orm-label">
      Source ORM
      <select [(ngModel)]="sourceOrm" (ngModelChange)="onSourceOrmChange($event)">
        @for (opt of ormTypeOptions; track opt.value) {
          <option [value]="opt.value">{{ opt.key }}</option>
        }
      </select>
    </label>

    @if (error) {
      <pre>{{ error }}</pre>
    }

    <button class="fill-sample-btn" (click)="fillWithSamples()">Fill Samples</button>

    @for (unit of displayUnits; track $index) {
      <app-content-display
        [description]="unit.description"
        [contentType]="unit.contentType"
        [(content)]="contentByUnit[unit.id]">
      </app-content-display>
    }

  </div>


  <div class="pane right">
    <h3>Constraints</h3>
    <div class="constraints">
      <label>
        Memory (KB)
        <input class="constraint-input" type="number" placeholder="" />
      </label>
      <label>
        Max Frameworks
        <input class="constraint-input" type="number" placeholder="" />
      </label>
    </div>

    <h3>Target Frameworks</h3>

    <div #tfGroup class="target-frameworks">
      @for (opt of ormTypeOptions; track opt.value) {
        <label>
          <input type="checkbox"
                 [value]="opt.value" />
          {{ opt.key }}
        </label>
      }
      <button class="select-all-btn" (click)="selectAllTargets(tfGroup)">Select All</button>
    </div>

    <div class="results">
      <app-result-table></app-result-table>
    </div>

    @for (unit of convertedUnits; track $index) {
      <app-content-display
        [description]="unit.contentType | contentTypeToString"
        [contentType]="unit.contentType"
        [content]="unit.content"
        [readonly]="true">
      </app-content-display>
    }

    <button class="middle-button" (click)="convert()" [disabled]="isLoading">
      {{ isLoading ? 'Convertingâ€¦' : 'Convert' }}
    </button>
  </div>

</div>
